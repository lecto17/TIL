* CLS(Cumulative Layout Shift)란?

  - CLS(누적 레이아웃 이동)는 페이지의 전체 수명 동안 발생하는 모든 예기치 않은 레이아웃 이동에 대해 가장 큰 레이아웃 이동 점수 버스트를 뜻한다. // 사용자에게 발생하는 레이아웃 이동(layout shift) 빈도를 측정

  - 방문자에게 콘텐츠가 얼마나 불안정한 지 측정하는 사용자 경험 측정 항목 및 웹 페이지의 성능 측정 지표이다.

  - 레이아웃 이동은 시각적 요소가 렌더링된 프레임에서 다음 프레임으로 위치를 변경할 때마다 발생한다.

  - 뷰포트에서 이동한 콘텐츠의 양과 영향을 받은 요소가 이동한 거리를 확인하여 점수로 표시한다.(CLS 점수, 좋은 사용자 환경을 제공하려면 사이트의 CLS 점수가 0.1 미만이여야 한다.)

  - 레이아웃 이동이 발생하는 원인

    * 치수가 없는 이미지

    * 크기가 없는 광고, 삽입 및 iframe

    * 동적으로 삽입된 컨텐츠

    * FOIT / FOUT을 유발하는 웹 글꼴

    * DOM을 업데이트하기 전에 네트워크 응답을 기다리는 작업

  cf)

  * https://wit.nts-corp.com/2020/12/28/6240

  * https://web.dev/i18n/ko/cls/

<br/>
* 메시지 브로커, 이벤트 브로커의 차이

  [ 메세지 브로커 ]

    - 이벤트 브로커로 역할을 할 수 없다.

    - 미들웨어 아키텍처에서 사용된다. (미들웨어는 서비스하는 애플리케이션들을 효율적으로 연결한다. ex, 메시징 플랫폼, 인증 플랫폼, 데이터베이스 등)

    - 메세지 브로커에 있는 큐에 데이터를 보내고 받는 프로듀서와 컨슈머를 통해 메세지를 통신하고 네트워크를 맺는 용도로 사용

    - 메세지를 받아서 처리하고 나면 즉시 또는 짧은 시간 내에 삭제되는 구조이다.

    - 레빗엠큐, 레디스 큐

  [ 이벤트 브로커 ]

    - 메시지 브로커로 역할을 할 수 있다.

    - 이벤트 또는 메시지라고 불리는 이 레코드(장부)를 딱 하나만 보관

    - 인덱스를 통해 개별 액세스를 관리한다.

    - 업무상 필요한 시간동안 이벤트를 보존할 수 있다.

    - 카프카, aws의 키네시스


이벤트 브로커는 서비스에 나오는 이벤트를 마치 DB에 데이터를 저장하듯 이벤트 브로커의 큐에 저장한다.

이렇게 데이터를 저장함으로써 얻는 장점이 있다.

1. 단일 진실 공급원으로 사용할 수 있다.
2. 장애가 발생했을 때, 장애가 일어난 지점부터 재처리할 수 있다.
3. 많은 양의 실시간 스트림 데이터를 효과적으로 처리할 수 있다는 특징이 있다. 

이벤트 브로커로 클러스터를 구축하면 이벤트 기반 마이크로 서비스 아키텍쳐로 발전하는데 아주 중요한 역할을 할 뿐만 아니라 메세지 브로커로서도 사용할 수 있다.

<br />

* stateless VS statefull

  - stateless

    - stateless 프로세스, 어플리케이션은 과거 트랜잭션에 대한 정보 또는 참조가 저장되지 않는다.

    - 스테이트리스 애플리케이션은 하나의 서비스 또는 기능을 제공하며, 콘텐츠 전달 네트워크(CDN), 웹, 프린트 서버를 사용해 단기 요청을 처리한다.

    - 가령 검색창에 질문을 입력하고 엔터키를 누르는 형식으로 진행되는 온라인 검색이 대표적이다.

    - 트랜잭션이 우발적으로 중단되거나 종료되면 새롭게 시작하면 된다.

    - 스테이트리스 트랜잭션은 단일 요청에 대해 하나의 응답이 나온다.

  <br/>

  - statefull

    - 스테이트풀 프로세스, 어플리케이션은 온라인 뱅킹이나 이메일처럼 여러번 반환될 수 있다.

    - 스테이트풀은 이전 트랜잭션의 컨텍스트에 따라 수행되며, 현재 트랜잭션이 이전 트랜잭션에서 발생한 상황에 영향을 받는다. 이러한 이유로 스테이트풀 어플리케이션은 사용자에게 받은 요청을 처리할 때마다 같은 서버를 사용한다.

    - 스테이트풀 트랜잭션은 컨텍스트와 내역이 저장되기에 중단되어도 중단된 곳부터 다시 시작할 수 있다.
